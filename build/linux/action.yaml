name: Build Linux
description: 'Builds a Linux app using Flutter.'
inputs:
  flavor:
    description: 'The flavor to build (if applicable).'
    required: false
    default: ''
  build-name:
    description: 'The build name to use for the Linux app.'
    required: false
    default: ''
  build-number:
    description: 'The build number to use for the Linux app.'
    required: false
    default: ''
  dart-defines:
    description: 'Dart defines in KEY=VALUE format, one per line.'
    required: false
    default: ''
runs:
  using: 'composite'
  steps:
    - name: Install Linux build dependencies
      shell: bash
      run: sudo apt-get update && sudo apt-get install -y libgtk-3-dev

    - name: Build Linux App
      shell: bash
      run: |
        flutter build linux \
          ${{ inputs.flavor != '' && '--flavor=${{ inputs.flavor }}' || '' }} \
          ${{ inputs.build-name != '' && '--build-name=${{ inputs.build-name }}' || '' }} \
          ${{ inputs.build-number != '' && '--build-number=${{ inputs.build-number }}' || '' }} \
          ${{ inputs.dart-defines != '' && '--dart-define=${{ inputs.dart-defines }}' || '' }}